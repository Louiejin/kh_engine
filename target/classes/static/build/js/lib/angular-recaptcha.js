/**
 * angular-recaptcha build:2015-06-22 
 * https://github.com/vividcortex/angular-recaptcha 
 * Copyright (c) 2015 VividCortex 
**/

!function(e){e.module("vcRecaptcha",[])}(angular),function(e){var t=e.module("vcRecaptcha");t.service("vcRecaptchaService",["$window","$q",function(t,n){function c(){return a?n.when(a):i}function r(){if(!a)throw new Error("reCaptcha has not been loaded yet.")}var a,o=n.defer(),i=o.promise;return t.vcRecaptchaApiLoaded=function(){a=t.grecaptcha,o.resolve(a)},e.isDefined(t.grecaptcha)&&t.vcRecaptchaApiLoaded(),{create:function(e,t,n,r){return r.callback=n,r.sitekey=t,c().then(function(t){return t.render(e,r)})},reload:function(e){r(),a.reset(e)},getResponse:function(e){return r(),a.getResponse(e)}}}])}(angular),function(e){function t(){throw new Error('You need to set the "key" attribute to your public reCaptcha key. If you don\'t have a key, please get one from https://www.google.com/recaptcha/admin/create')}var n=e.module("vcRecaptcha");n.directive("vcRecaptcha",["$document","$timeout","vcRecaptchaService",function(e,n,c){return{restrict:"A",require:"?^^form",scope:{response:"=?ngModel",key:"=",theme:"=?",size:"=?",tabindex:"=?",onCreate:"&",onSuccess:"&",onExpire:"&"},link:function(r,a,o,i){function u(){angular.element(e[0].querySelectorAll(".pls-container")).parent().remove()}o.hasOwnProperty("key")||t(),r.widgetId=null;var d=r.$watch("key",function(e){if(e){40!==e.length&&t();var s=function(e){n(function(){i&&i.$setValidity("recaptcha",!0),r.response=e,r.onSuccess({response:e,widgetId:r.widgetId})}),n(function(){i&&i.$setValidity("recaptcha",!1),r.response="",r.onExpire({widgetId:r.widgetId})},12e4)};c.create(a[0],e,s,{theme:r.theme||o.theme||null,tabindex:r.tabindex||o.tabindex||null,size:r.size||o.size||null}).then(function(e){i&&i.$setValidity("recaptcha",!1),r.widgetId=e,r.onCreate({widgetId:e}),r.$on("$destroy",u)}),d()}})}}}])}(angular);